# Codebase Structure

**Analysis Date:** 2026-01-21

## Directory Layout

```
chinese-idioms-landing/
├── app/                    # Next.js App Router pages
│   ├── api/               # API routes
│   ├── blog/              # English blog pages
│   ├── components/        # Shared React components
│   ├── [lang]/            # Internationalized routes (13 languages)
│   ├── privacy/           # Privacy policy
│   └── themes/            # Theme showcase pages
├── src/
│   └── lib/               # Shared libraries
│       └── utils/         # Utility functions
├── public/                # Static assets
│   └── translations/      # Translated idiom data (13 languages)
├── content/
│   └── blog/              # Markdown blog post overrides
├── scripts/               # Build and translation scripts
└── .github/
    └── workflows/         # GitHub Actions
```

## Directory Purposes

**app/**
- Purpose: Next.js App Router pages and components
- Contains: Page components, layouts, API routes, client components
- Key files: `layout.tsx`, `page.tsx`, `sitemap.ts`, `robots.ts`, `manifest.ts`
- Subdirectories: `api/`, `blog/`, `components/`, `[lang]/`, `privacy/`, `themes/`

**app/api/**
- Purpose: API endpoints with rate limiting
- Contains: Route handlers for search, blog posts, RSS
- Key files: `search/route.ts`, `blog-posts/route.ts`, `rss/route.ts`

**app/blog/**
- Purpose: English blog pages
- Contains: Blog listing, individual post pages, client components
- Key files: `page.tsx`, `[slug]/page.tsx`, `BlogClient.tsx`, `blog.css`

**app/[lang]/**
- Purpose: Internationalized routes for 13 languages
- Contains: Localized homepage, blog, privacy, themes
- Languages: es, pt, id, vi, ja, ko, th, hi, ar, fr, tl, ms, ru

**src/lib/**
- Purpose: Core business logic and utilities
- Contains: Blog generation, constants, translations
- Key files: `blog.ts`, `blog-intl.ts`, `constants.ts`, `translations.ts`

**src/lib/utils/**
- Purpose: Reusable utility functions
- Contains: Rate limiting, pinyin processing
- Key files: `rate-limit.ts`, `pinyin.ts`

**public/**
- Purpose: Static assets served directly
- Contains: Images, JSON data, favicons
- Key files: `idioms.json` (365+ idioms), `og-image.png`

**public/translations/**
- Purpose: Translated idiom content
- Contains: Per-language idioms.json files
- Subdirectories: `es/`, `pt/`, `id/`, `vi/`, `ja/`, `ko/`, `th/`, `hi/`, `ar/`, `fr/`, `tl/`, `ms/`, `ru/`

**content/blog/**
- Purpose: Optional markdown overrides for blog posts
- Contains: Custom blog content with frontmatter
- Pattern: `YYYY-MM-DD-slug.md`

**scripts/**
- Purpose: Build and automation scripts
- Contains: Blog generation, translation scripts
- Key files: `generate-blog-posts.js`, `translate-*.js`

## Key File Locations

**Entry Points:**
- `middleware.ts` - Edge middleware for routing
- `app/layout.tsx` - Root layout with global metadata
- `app/page.tsx` - English homepage

**Configuration:**
- `next.config.ts` - Next.js configuration
- `tsconfig.json` - TypeScript configuration
- `tailwind.config.ts` - Tailwind CSS theme
- `.env` / `.env.example` - Environment variables

**Core Logic:**
- `src/lib/blog.ts` - Blog post generation (English)
- `src/lib/blog-intl.ts` - Blog post generation (i18n)
- `src/lib/constants.ts` - Language configuration
- `src/lib/translations.ts` - UI translations (1,386 lines)

**Data Sources:**
- `public/idioms.json` - Master idiom database (365+ entries)
- `public/translations/{lang}/idioms.json` - Translated idioms

## Naming Conventions

**Files:**
- kebab-case for utilities: `rate-limit.ts`, `blog-intl.ts`
- PascalCase for React components: `LanguageSelector.tsx`, `BlogClient.tsx`
- `page.tsx` / `layout.tsx` / `route.ts` for Next.js conventions

**Directories:**
- kebab-case for features: `blog/`, `themes/`
- `[param]` for dynamic routes: `[slug]/`, `[lang]/`, `[theme]/`
- Lowercase for all directories

**Special Patterns:**
- `route.ts` - API route handlers
- `*.css` - Component-specific styles
- `YYYY-MM-DD-slug.md` - Blog markdown files

## Where to Add New Code

**New Page:**
- English: `app/{page-name}/page.tsx`
- Multilingual: `app/[lang]/{page-name}/page.tsx`

**New API Endpoint:**
- Location: `app/api/{endpoint-name}/route.ts`
- Pattern: Export GET/POST handlers with rate limiting

**New Component:**
- Shared: `app/components/{ComponentName}.tsx`
- Page-specific: Co-locate with page file

**New Utility:**
- Location: `src/lib/utils/{utility-name}.ts`
- Export named functions with JSDoc

**New Language:**
- Add to `src/lib/constants.ts` SUPPORTED_LANGUAGES
- Create `public/translations/{lang}/idioms.json`
- Add translations to `src/lib/translations.ts`

## Special Directories

**.next/**
- Purpose: Next.js build output
- Source: Generated by `next build`
- Committed: No (gitignored)

**.vercel/**
- Purpose: Vercel project configuration
- Source: Created by Vercel CLI
- Committed: No (gitignored)

**node_modules/**
- Purpose: npm dependencies
- Source: `npm install`
- Committed: No (gitignored)

---

*Structure analysis: 2026-01-21*
*Update when directory structure changes*
